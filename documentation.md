# üìö Embedding API ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è**: 1.0  
**–û–ø–∏—Å–∞–Ω–∏–µ**: API –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ: —á–∞–Ω–∫–∏–Ω–≥, —ç–º–±–µ–¥–¥–∏–Ω–≥–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø–æ–∏—Å–∫ –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.  
**–ë–∞–∑–æ–≤—ã–π URL**: `http://localhost:8000`
**–°—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–∞: uvicorn app.main:app --host 0.0.0.0 --port 8000

## ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã


```http
GET /health ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ 

–û—Ç–≤–µ—Ç (200 OK):
{
  "status": "ok",
  "model": "intfloat/multilingual-e5-large"
}



2. /embed ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
POST /embed
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
{
  "texts": ["–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!", "–ö–∞–∫ –¥–µ–ª–∞?"],
  "type": "query"
}

–û—Ç–≤–µ—Ç (200 OK):
{
  "embeddings": [[0.12, -0.45, ...], [0.67, 0.23, ...]],
  "dim": 384,
  "type": "query"
}


3. /chunk-embed ‚Äî –ß–∞–Ω–∫–∏–Ω–≥ + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
POST /chunk-embed
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
{
  "text": "–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...",
  "chunk_size": 1500,
  "overlap": 40,
  "emb_type": "passage"
}

–û—Ç–≤–µ—Ç (200 OK):
{
  "embeddings": [[0.12, -0.45, ...], [0.67, 0.23, ...]],
  "dim": 384,
  "type": "query"
}



4. /save-content ‚Äî –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
POST /save-content
–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
{
  "text": "–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç?",
  "user_id": 1001,
  "header": "–í–æ–∑–≤—Ä–∞—Ç",
  "url": "https://example.com/return",
  "chunk_size": 1500,
  "overlap": 40
}

–û—Ç–≤–µ—Ç (200 OK):
{
  "status": "success",
  "content_id": 123456789,
  "saved_chunks": 3
}



5. /search ‚Äî –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
POST /search
{
  "user_id": 1001,
  "query": "–∫–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä",
  "cluster_label": "0",
  "limit": 5
}

–û—Ç–≤–µ—Ç (200 OK):
{
  "results": [
    {
      "content_id": 123456789,
      "header": "–í–æ–∑–≤—Ä–∞—Ç",
      "url": "https://example.com/return",
      "text": "–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç...",
      "rerank_score": 0.87
    }
  ]
}



6. /clusterize ‚Äî –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /clusterize?user_id=1001

–û—Ç–≤–µ—Ç (200 OK):
{
  "status": "success",
  "clusters_found": 3
}



7. /clusters ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
GET /clusters?user_id=1001

–û—Ç–≤–µ—Ç (200 OK):
{
  "clusters": [
    {"label": "0", "description": "–ö–ª–∞—Å—Ç–µ—Ä 0"},
    {"label": "1", "description": "–ö–ª–∞—Å—Ç–µ—Ä 1"}
  ]
}
```



–ü—Ä–∏–º–µ—Ä:
import requests
# 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
resp = requests.post("http://localhost:8000/save-content", json={
    "text": "–ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä? –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.",
    "user_id": 1001,
    "header": "–í–æ–∑–≤—Ä–∞—Ç"
})
# 2. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑—É–µ–º
requests.post("http://localhost:8000/clusterize?user_id=1001")
# 3. –ò—â–µ–º
resp = requests.post("http://localhost:8000/search", json={
    "user_id": 1001,
    "query": "–≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥"
})
print(resp.json())